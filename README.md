# Proxy Server –Ω–∞ Python üåäüî•‚ö°

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π HTTP/HTTPS-–ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –∏ –≤–µ–±-–æ–±—ë—Ä—Ç–∫—É –Ω–∞ Flask –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ä–µ–∫–ª–∞–º—ã –∏ –≤—Å—Ç–∞–≤–∫–∏ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –±–∞–Ω–Ω–µ—Ä–æ–≤ –Ω–∞ –ø–æ—Å–µ—â–∞–µ–º—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö.


* **–ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –ø—Ä–æ–∫—Å–∏ (–ø–æ—Ä—Ç 8080)**

  * –ü–µ—Ä–µ—Ö–≤–∞—Ç –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Ä–µ–∫–ª–∞–º–Ω—ã–º –¥–æ–º–µ–Ω–∞–º (–∏–∑ `ad_hosts.txt`)
  * –ü–µ—Ä–µ–∑–∞–ø–∏—Å—å HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
* **–í–µ–±-–æ–±—ë—Ä—Ç–∫–∞ Flask (–ø–æ—Ä—Ç 5000)**

  * –ü–æ–ª—É—á–∞–µ—Ç –æ—á–∏—â–µ–Ω–Ω—ã–π HTML —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
  * –£–¥–∞–ª—è–µ—Ç —Ä–µ–∫–ª–∞–º–Ω—ã–µ —Ç–µ–≥–∏ –∏ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–∑ HTML
  * –ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã (`href`, `src`) —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∏ —à–ª–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–ø—Ä–æ–∫—Å–∏
  * –í—Å—Ç–∞–≤–ª—è–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ –±–∞–Ω–Ω–µ—Ä—ã –≤ –Ω–∞—á–∞–ª–æ `<body>`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
project_root/
‚îú‚îÄ‚îÄ Server/ProxyServer.py   # –ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –ø—Ä–æ–∫—Å–∏
‚îú‚îÄ‚îÄ Server/banners.py       # –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–∞–Ω–Ω–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ ad_hosts.txt            # –°–ø–∏—Å–æ–∫ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
‚îú‚îÄ‚îÄ web_proxy.py            # Flask-–æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ –ø—Ä–æ–∫—Å–∏ + –≤—Å—Ç–∞–≤–∫–∞ –±–∞–Ω–Ω–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ tests/test_proxy.py     # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–∫—Å–∏ –∏ —É—Ç–∏–ª–∏—Ç
‚îî‚îÄ‚îÄ README.md               # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* Python 3.8+
* –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏:

  * `requests`
  * `flask`
  * `beautifulsoup4`
  * `bs4`

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```

##  –ó–∞–ø—É—Å–∫ –ø—Ä–æ–∫—Å–∏ –∏ –≤–µ–±-—Å–µ—Ä–≤–∏—Å–∞

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –ø—Ä–æ–∫—Å–∏** (–Ω–∞ –ø–æ—Ä—Ç—É `8080`):

   ```bash
   python web_proxy.py  # –≤ –Ω–∞—á–∞–ª–µ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è ProxyServer –≤ –ø–æ—Ç–æ–∫–µ
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å Flask-–æ–±—ë—Ä—Ç–∫—É** (–ø–æ—Ä—Ç `5000`):

   –¢–æ—Ç –∂–µ —Å–∫—Ä–∏–ø—Ç `web_proxy.py` –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ ‚Äî TCP-–ø—Ä–æ–∫—Å–∏ –∏ Flask.

3. **–û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä**:

   –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É:

   ```
   http://127.0.0.1:5000/?url=http://example.com&embed_ads=1
   ```

   –≥–¥–µ:

   * `url` ‚Äî –∞–¥—Ä–µ—Å —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏ –æ—á–∏—Å—Ç–∏—Ç—å
   * `embed_ads=1` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–ª–∞–≥ –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –±–∞–Ω–Ω–µ—Ä–∞

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞

* –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏ –∏ –≤—ã—Å—Ç–∞–≤—å—Ç–µ HTTP-–ø—Ä–æ–∫—Å–∏: `127.0.0.1:8080`.
* **–í–∞–∂–Ω–æ:** –¥–ª—è HTTPS –æ—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª–µ –ø—É—Å—Ç—ã–º –∏ **–Ω–µ** —Å—Ç–∞–≤—å—Ç–µ —Ñ–ª–∞–∂–æ–∫ "–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—Ç –∂–µ –ø—Ä–æ–∫—Å–∏ –¥–ª—è HTTPS".
* –í—Å–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã –±—Ä–∞—É–∑–µ—Ä –±—É–¥–µ—Ç –æ—Ç–¥–∞–≤–∞—Ç—å —á–µ—Ä–µ–∑ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –ø—Ä–æ–∫—Å–∏, –∞ –≤–µ–±-–ø—Ä–æ–∫—Å–∏ –Ω–∞ Flask –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è HTML-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

##  –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã:

```bash
pytest test/test_dump_and_hosts.py
pytest test/test_factorial.py
pytest test/test_html_utils.py
pytest test/test_request_utils.py
pytest test/test_web_proxy.py
```

–û–Ω–∏ –ø–æ–∫—Ä—ã–≤–∞—é—Ç:

* –ü—Ä–æ–≤–µ—Ä–∫—É HTTP –∏ HTTPS —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
* –†–∞–∑–±–æ—Ä –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—é HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ (`GET`, `CONNECT`)
* –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–∑ HTML
* –ë–ª–æ–∫–∏—Ä–æ–≤–∫—É —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

* **`ad_hosts.txt`** ‚Äî –∫–∞–∂–¥—ã–π –¥–æ–º–µ–Ω —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏, –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å `#`.
* **`Server/banners.py`** ‚Äî —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –±–∞–Ω–Ω–µ—Ä—ã –∏ –ø—Ä–∞–≤–∏–ª–∞ –≤—ã–±–æ—Ä–∞.


–ê–≤—Ç–æ—Ä: –ê–Ω–¥—Ä–µ–π –°—É–ª—Ç–∞–Ω–æ–≤
